"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{1156:(e,n,s)=>{s.r(n),s.d(n,{default:()=>c});var t=s(7876),r=s(4232),o=s(6743);function c(){let[e,n]=(0,r.useState)("Initializing JARVIS..."),[s,c]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=console.warn,n=console.error,s=console.log;return console.warn=function(){for(var n=arguments.length,s=Array(n),t=0;t<n;t++)s[t]=arguments[t];let r=s.join(" ");r.includes("CleanUnusedInitializersAndNodeArgs")||r.includes("onnxruntime")||r.includes("graph.cc")||r.includes("decoder/rnn")||r.includes("_output_0")||r.includes("VAD model failed to load")||r.includes("onSpeechStart")||r.includes("Interruption requested")||r.includes("webSecurity")||r.includes("allowRunningInsecureContent")||r.includes("Content-Security-Policy")||r.includes("Electron Security Warning")||e.apply(console,s)},console.error=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];let r=s.join(" ");r.includes("Electron Security Warning")||r.includes("webSecurity")||r.includes("Content-Security-Policy")||r.includes("allowRunningInsecureContent")||n.apply(console,s)},console.log=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let r=n.join(" ");r.includes("Electron Security Warning")||r.includes("webSecurity")||s.apply(console,n)},()=>{console.warn=e,console.error=n,console.log=s}},[]);let{status:a,userAudioAmplitude:l=0,agentAudioAmplitude:u=0,triggerUserTurnStarted:d,triggerUserTurnFinished:g}=(e=>{let{pipelineId:n,sessionId:s,authorizeSessionEndpoint:t,metadata:c={},onConnect:i,onDisconnect:a,onError:l,onDataMessage:u}=e,[d,g]=(0,r.useState)("initializing"),[p,h]=(0,r.useState)(0),[m,y]=(0,r.useState)(0),S=(0,r.useRef)(null);(0,r.useEffect)(()=>(console.log("Creating LayercodeClient instance"),S.current=new o.A({pipelineId:n,sessionId:s,authorizeSessionEndpoint:t,metadata:c,onConnect:({sessionId:e})=>{i?.({sessionId:e})},onDisconnect:()=>{a?.()},onError:e=>{l?.(e)},onDataMessage:e=>{u?.(e)},onStatusChange:e=>{g(e)},onUserAmplitudeChange:e=>{h(e)},onAgentAmplitudeChange:e=>{y(e)}}),e._websocketUrl&&(S.current._websocketUrl=e._websocketUrl),S.current.connect().catch(e=>{console.error("Failed to connect to pipeline:",e),l?.(e)}),()=>{S.current&&S.current.disconnect()}),[n,s,t]);let j=(0,r.useCallback)(()=>{S.current?.triggerUserTurnStarted()},[]),k=(0,r.useCallback)(()=>{S.current?.triggerUserTurnFinished()},[]);return{triggerUserTurnStarted:j,triggerUserTurnFinished:k,connect:(0,r.useCallback)(()=>{S.current?.connect()},[]),disconnect:(0,r.useCallback)(()=>{S.current?.disconnect()},[]),status:d,userAudioAmplitude:p,agentAudioAmplitude:m}})({pipelineId:"l7l2bv2c",authorizeSessionEndpoint:"https://jarvis-vert-eta.vercel.app/api/authorize",metadata:{sessionId:"jarvis-"+Date.now()},onConnect:e=>{let{sessionId:s}=e;console.log("✅ Connected to Layercode:",s),n("\uD83C\uDFA4 JARVIS is listening... Speak naturally")},onDisconnect:()=>{console.log("\uD83D\uDD0C Disconnected from Layercode"),n("Voice processing disconnected")},onError:e=>{console.error("❌ Layercode error:",e),c("Voice error: "+e.message),setTimeout(()=>c(""),5e3)},onTranscript:e=>{console.log("\uD83D\uDCDD Voice input:",e.substring(0,50)),n('You said: "'.concat(e,'"'))},onTurnStarted:()=>{console.log("\uD83C\uDFA4 Turn started - user speaking"),n("\uD83C\uDFA4 Listening to you...")},onTurnFinished:()=>{console.log("⏳ Processing..."),n("⏳ JARVIS is thinking...")},onResponse:e=>{console.log("\uD83D\uDDE3️ JARVIS response:",e.substring(0,50)),n('\uD83E\uDD16 JARVIS: "'.concat(e,'"')),setTimeout(()=>{n("\uD83C\uDFA4 JARVIS is listening... Speak naturally")},4e3)}});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{children:"JARVIS"}),(0,t.jsx)("p",{className:"subtitle",children:"Voice Todo Assistant"})]}),(0,t.jsxs)("div",{className:"voice-indicators",children:[(0,t.jsx)(i,{emoji:"\uD83E\uDD16",name:"JARVIS",amplitude:u,speaking:u>.001,statusText:u>.001?"Speaking...":"Ready",type:"agent"}),(0,t.jsx)(i,{emoji:"\uD83C\uDFA4",name:"You",amplitude:l,speaking:l>.001,statusText:l>.001?"Speaking...":"Listening",type:"user"})]}),(0,t.jsx)("div",{className:"status",children:e}),s&&(0,t.jsx)("div",{className:"error",children:s}),(0,t.jsxs)("div",{className:"help-text",children:["JARVIS listens automatically. Try saying:",(0,t.jsx)("br",{}),'"What needs my attention?" • "Add walk the dog" • "Mark groceries done"']})]})}function i(e){let{emoji:n,name:s,amplitude:r,speaking:o,statusText:c,type:i}=e,a=Math.max(4,"user"===i?300*r:180*r);return(0,t.jsxs)("div",{className:"speaker-card ".concat(o?"user"===i?"user-speaking":"speaking":""),children:[(0,t.jsxs)("div",{className:"speaker-header",children:[(0,t.jsx)("span",{className:"speaker-emoji",children:n}),(0,t.jsx)("span",{className:"speaker-name",children:s})]}),(0,t.jsxs)("div",{className:"amplitude-bars",children:[(0,t.jsx)("div",{className:"bar",style:{height:"".concat(a,"px")}}),(0,t.jsx)("div",{className:"bar",style:{height:"".concat(a,"px"),animationDelay:"0.1s"}}),(0,t.jsx)("div",{className:"bar",style:{height:"".concat(a,"px"),animationDelay:"0.2s"}})]}),(0,t.jsx)("div",{className:"speaking-status",children:c})]})}}}]);